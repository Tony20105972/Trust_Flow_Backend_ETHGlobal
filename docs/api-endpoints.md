# ⚡️ API Endpoints Reference

This document provides a comprehensive list and description of the RESTful API endpoints exposed by our FastAPI backend. These endpoints are designed to facilitate seamless interaction between our frontend application and the core blockchain/AI functionalities.

---

## **Base URL**

`https://your-deployed-api-url.com` (e.g., your Render/Fly.io app URL)

---

## **Authentication**

* **API Key (Recommended for Production)**: For production deployments, API key authentication can be implemented (e.g., using `FastAPI.Security.APIKeyHeader`).
* **No Authentication (Hackathon Demo)**: For the purpose of this hackathon, most endpoints might be open for easy demonstration. *Please note this is for demo purposes only and would require proper authentication for a production environment.*

---

## **Endpoints**

### **1. Contract Deployment**

* **`POST /deploy-contract`**
    * **Description**: Deploys a new smart contract to a specified blockchain network. The contract code can be provided directly or generated by an AI model based on a prompt.
    * **Request Body**:
        ```json
        {
          "network_name": "string",     // e.g., "etherlink_ghostnet", "polygon_mainnet"
          "contract_name": "string",    // e.g., "MyContract" (Solidity file name without .sol)
          "contract_code": "string",    // Optional: Full Solidity code. If not provided, AI will generate.
          "prompt": "string",           // Optional: Prompt for AI to generate contract (e.g., "A simple ERC20 token")
          "constructor_args": ["any"]   // Optional: Array of constructor arguments
        }
        ```
    * **Response**:
        ```json
        {
          "status": "success",
          "contract_address": "0x...",
          "transaction_hash": "0x...",
          "explorer_url": "string"
        }
        ```
    * **Error Responses**: `400 Bad Request` (Invalid input), `500 Internal Server Error` (Deployment failed)

### **2. Contract Function Calls**

* **`POST /call-contract-function`**
    * **Description**: Interacts with an already deployed smart contract by calling one of its functions. Supports both read-only (view/pure) and state-changing (write) functions.
    * **Request Body**:
        ```json
        {
          "network_name": "string",
          "contract_address": "string", // Deployed contract address
          "abi": [{}],                  // Contract ABI (JSON array)
          "function_name": "string",
          "function_args": ["any"],     // Optional: Array of function arguments
          "send_transaction": true      // Boolean: true for write functions, false for read functions
        }
        ```
    * **Response (Read Function)**:
        ```json
        {
          "status": "success",
          "result": "any"               // The return value of the function call
        }
        ```
    * **Response (Write Function)**:
        ```json
        {
          "status": "success",
          "transaction_hash": "0x...",
          "explorer_url": "string"
        }
        ```
    * **Error Responses**: `400 Bad Request`, `500 Internal Server Error`

### **3. IPFS Upload**

* **`POST /upload-ipfs`**
    * **Description**: Uploads a file (e.g., report, NFT metadata, image) to IPFS via a pinning service.
    * **Request Body**:
        ```json
        {
          "file_data": "string", // Base64 encoded file content, or direct string for JSON/text
          "file_name": "string", // Optional: Name for the file (e.g., "my_report.json")
          "mime_type": "string"  // Optional: MIME type (e.g., "application/json", "image/png")
        }
        ```
    * **Response**:
        ```json
        {
          "status": "success",
          "ipfs_cid": "string",         // Content Identifier
          "ipfs_gateway_url": "string"  // Public gateway URL to view the content
        }
        ```
    * **Error Responses**: `400 Bad Request`, `500 Internal Server Error`

### **4. DAO Operations**

* **`POST /dao/propose`**
    * **Description**: Creates a new proposal in the DAO (Decentralized Autonomous Organization) contract.
    * **Request Body**:
        ```json
        {
          "network_name": "string",
          "dao_address": "string",
          "abi": [{}],
          "title": "string",
          "description": "string",
          "target_address": "string", // Address of contract affected by proposal
          "value": "int",             // ETH/XTZ value to send with proposal (wei)
          "calldata": "string"        // Hex string of function call data (e.g., "0x1234abcd")
        }
        ```
    * **Response**:
        ```json
        {
          "status": "success",
          "proposal_id": "string", // Or uint256 as string
          "transaction_hash": "0x...",
          "explorer_url": "string"
        }
        ```
* **`POST /dao/vote`**
    * **Description**: Casts a vote on an existing DAO proposal.
    * **Request Body**:
        ```json
        {
          "network_name": "string",
          "dao_address": "string",
          "abi": [{}],
          "proposal_id": "string",  // Proposal ID to vote on
          "support": "int"          // 0: Against, 1: For, 2: Abstain
        }
        ```
    * **Response**:
        ```json
        {
          "status": "success",
          "transaction_hash": "0x...",
          "explorer_url": "string"
        }
        ```

---

## **Error Handling**

All endpoints will return a JSON response with an `error` key and a descriptive `message` if an operation fails.

```json
{
  "status": "error",
  "message": "Detailed error description here."
}
